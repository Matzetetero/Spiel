<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Space Survival</title>
    <style>
        body { margin: 0; background: #050505; color: white; font-family: sans-serif; overflow: hidden; }
        canvas { display: block; }
        #ui { position: absolute; top: 20px; left: 20px; pointer-events: none; }
        #game-over { 
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            text-align: center; display: none; background: rgba(0,0,0,0.8); padding: 20px; border-radius: 10px;
        }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; background: #00ffcc; border: none; border-radius: 5px; }
    </style>
</head>
<body>

    <div id="ui">
        <div>Punkte: <span id="score">0</span></div>
    </div>

    <div id="game-over">
        <h1>GAME OVER</h1>
        <p>Deine Punktzahl: <span id="final-score">0</span></p>
        <button onclick="location.reload()">Nochmal versuchen</button>
    </div>

    <canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('score');
    const gameOverEl = document.getElementById('game-over');
    const finalScoreEl = document.getElementById('final-score');

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let score = 0;
    let gameActive = true;

    // Spieler-Objekt
    const player = {
        x: canvas.width / 2,
        y: canvas.height / 2,
        radius: 15,
        color: '#00ffcc',
        speed: 5
    };

    const enemies = [];
    const keys = {};

    // Input Steuerung
    window.addEventListener('keydown', e => keys[e.key] = true);
    window.addEventListener('keyup', e => keys[e.key] = false);

    function spawnEnemy() {
        if (!gameActive) return;
        const radius = 10 + Math.random() * 15;
        let x, y;

        // Gegner spawnen au√üerhalb des Bildschirms
        if (Math.random() < 0.5) {
            x = Math.random() < 0.5 ? 0 - radius : canvas.width + radius;
            y = Math.random() * canvas.height;
        } else {
            x = Math.random() * canvas.width;
            y = Math.random() < 0.5 ? 0 - radius : canvas.height + radius;
        }

        const angle = Math.atan2(player.y - y, player.x - x);
        const velocity = {
            x: Math.cos(angle) * (1 + score / 1000), // Werden mit der Zeit schneller
            y: Math.sin(angle) * (1 + score / 1000)
        };

        enemies.push({ x, y, radius, color: '#ff4d4d', velocity });
        setTimeout(spawnEnemy, Math.max(200, 1000 - score / 5));
    }

    function update() {
        if (!gameActive) return;

        // Bewegung Spieler
        if ((keys['w'] || keys['ArrowUp']) && player.y > 0) player.y -= player.speed;
        if ((keys['s'] || keys['ArrowDown']) && player.y < canvas.height) player.y += player.speed;
        if ((keys['a'] || keys['ArrowLeft']) && player.x > 0) player.x -= player.speed;
        if ((keys['d'] || keys['ArrowRight']) && player.x < canvas.width) player.x += player.speed;

        // Gegner bewegen
        enemies.forEach((enemy, index) => {
            enemy.x += enemy.velocity.x;
            enemy.y += enemy.velocity.y;

            // Kollisionsabfrage (Kreis-Kollision)
            const dist = Math.hypot(player.x - enemy.x, player.y - enemy.y);
            if (dist - enemy.radius - player.radius < 1) {
                gameActive = false;
                gameOverEl.style.display = 'block';
                finalScoreEl.innerText = Math.floor(score);
            }
        });

        score += 0.1;
        scoreEl.innerText = Math.floor(score);
    }

    function draw() {
        ctx.fillStyle = 'rgba(5, 5, 5, 0.2)'; // Motion Blur Effekt
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Spieler zeichnen
        ctx.beginPath();
        ctx.arc(player.x, player.y, player.radius, 0, Math.PI * 2);
        ctx.fillStyle = player.color;
        ctx.fill();
        ctx.closePath();

        // Gegner zeichnen
        enemies.forEach(enemy => {
            ctx.beginPath();
            ctx.arc(enemy.x, enemy.y, enemy.radius, 0, Math.PI * 2);
            ctx.fillStyle = enemy.color;
            ctx.fill();
            ctx.closePath();
        });

        requestAnimationFrame(() => {
            update();
            draw();
        });
    }

    spawnEnemy();
    draw();

    window.addEventListener('resize', () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });
</script>
</body>
</html>
